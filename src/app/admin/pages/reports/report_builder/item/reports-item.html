
<div layout="column" style="width: 100%;" class="reports-item-container">
<md-card flex="100" class="p-es-30 m-w-es-40 card-reports">
    <form layout="row" layout-wrap layout-align="center center" name="form">
        <md-input-container  flex="100">
            <label >Name</label>
            <input ng-model="report.name" required name="name">
            <div ng-messages="form.name.$error">
                <ng-message when="required">Name is required.</ng-message>
            </div>
        </md-input-container>
        <section flex>
        </section>


        <span flex="100"  class="subtitle ">Based in</span>
        <md-input-container flex="50">
            <md-select aria-label="basedIn" ng-model="report.filter.country">
                <md-option ng-repeat="country in COUNTRIES" ng-value="country.id">{{country.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">Associated with SLAPexpert</span>
        <md-input-container flex="50">
            <md-select md-container-class="type-menu" aria-label="slapExpert" ng-model="report.filter.expert" multiple>
                <md-option ng-repeat="ex in expert" ng-value="ex._id">{{ex.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle " >Associated with Partner</span>
        <md-input-container flex="50">
            <md-select md-container-class="type-menu" aria-label="slapPartner" ng-model="report.filter.partner" multiple>
                <md-option ng-repeat="pa in partner" ng-value="pa._id">{{pa.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">SLAPstatus</span>
        <md-input-container flex="50">
            <md-select aria-label="slapStatus" ng-model="report.filter.slapStatus">
                <md-option ng-repeat="status in slapStatuses" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100" ng-if="!report.filter.slapStatus" class="subtitle">Build Status</span>
        <md-input-container ng-if="!report.filter.slapStatus" flex="50">
            <md-select  aria-label="buildStatus" ng-model="report.filter.buildStatus">
                <md-option ng-repeat="status in buildStatus" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>


        <span flex="100"  class="subtitle ">Whose Status Is</span>
        <md-input-container flex="50">
            <md-select  aria-label="status" ng-model="report.filter.status">
                <md-option ng-repeat="status in STATUSES" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">Associated With Plan</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="plan" ng-model="report.filter.products" multiple>
            <md-option ng-repeat="item in allProducts" ng-value="item._id">{{item.productName}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">Associated With Coupon</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="coupon" ng-model="report.filter.coupons" multiple>
            <md-option ng-repeat="item in allCoupons" ng-value="item._id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">Did These Activities</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="act" ng-model="report.filter.activities" multiple>
            <md-option ng-repeat="item in ActivitiesAll" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100" ng-if="report.filter.slapStatus" class="subtitle">They Are In</span>
        <md-input-container ng-if="report.filter.slapStatus" flex="100">
        <md-select  aria-label="quater" ng-model="report.filter.quaters" multiple>
            <md-option ng-repeat="item in allQuaters" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle ">Associated With Strategy</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="strategy" ng-model="report.filter.strategies" multiple>
            <md-option ng-repeat="item in allStrategies" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">User payment status</span>
        <md-input-container flex="100">
        <md-select aria-label="paymentStatus" ng-model="report.filter.paymentStatus">
            <md-option ng-repeat="item in pausingPaymentsStatus" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Declined / Money Owed To Us</span>
        <md-input-container flex="100">
        <md-select aria-label="declinedStatus" ng-model="report.filter.declinedStatus">
            <md-option ng-repeat="item in declinedStatus" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Goal Progress</span>
        <section flex="100" layout="row" layout="row" >
            <span>From</span>
            <md-input-container>
                <input aria-label="from" ng-model="report.filter.goalProgress.from" />
            </md-input-container>
            <span>% To</span>
            <md-input-container>
                <input aria-label="to" ng-model="report.filter.goalProgress.to" />
            </md-input-container>
            <span>% Of</span>

            <md-input-container>
                <md-select aria-label="type" ng-model="report.filter.goalProgress.type">
                    <md-option value="annual">Annual</md-option>
                    <md-option value="quaterly">Quaterly</md-option>
                </md-select>
                <div class="md-errors-spacer"></div>
            </md-input-container>
        </section>
        <section flex>
        </section>



        <section layout="row" layout-align="end center" flex="100" >

            <md-button ng-click="runReportBuilder()" class="md-primary">
                Run
            </md-button>
            <md-button ng-click="createOrSave($event)" class="md-primary" ng-disabled="form.$invalid">
                {{reportID ? 'Save' : 'Create'}}
            </md-button>
            <md-button ng-click="deleteItem($event)" class="md-warn" ng-if="reportID">
                Delete
            </md-button>
        </section>
    </form>

</md-card>
</div>

<md-card ng-if="res.users.length > 0 || is_running" flex="100" class="p-es-30 m-w-es-40">
    <section ng-if="!report.filter.slapStatus">         
        <div class="pull-right">
            <button class="print" ng-click="printSlap()">
                <i class="fa fa-print" aria-hidden="true"></i>
                Print
            </button>
        </div>
        <div grid-data class='slap-grid' id="users-grid"
         grid-options="gridData.gridOptions" grid-actions="gridData.gridActions" ng-if="dataReady">
            <div layout-gt-sm="row" layout-sm="column" layout-align="center">
                <div flex-gt-sm="100" flex-sm="100" layout="row" layout-align="start center">            
                    <!-- <div layout-xs="column" layout="row" layout-align-xs="end end" layout-align="end center"> -->
                        <md-input-container flex-offset-gt-xs="5" class="items-per-page">
                            <md-select ng-init="paginationOptions.itemsPerPage = '20'" ng-model="paginationOptions.itemsPerPage" ng-change="reloadGrid()" aria-label="page-selector">
                                
                                <md-option value="5">5</md-option>
                                <md-option value="10">10</md-option>
                                <md-option value="20">20</md-option>
                                <md-option value="50">50</md-option>
                            </md-select>
                        </md-input-container>
                        <grid-pagination max-size="5"
                        boundary-links="true"
                        class="pagination mdl-shadow--2dp" 
                        ng-if="paginationOptions.totalItems  > paginationOptions.itemsPerPage"
                        total-items="paginationOptions.totalItems"
                        ng-model="paginationOptions.currentPage"
                        ng-change="reloadGrid()"
                        items-per-page="paginationOptions.itemsPerPage"></grid-pagination>
                    <!-- </div> -->
                </div>
            </div>
            <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp table table-responsive table-hover">
                <thead>
                    <tr>
                        <th sortable="businessName" class="sortable">
                            <span>Business Name</span>
                        </th>
                        <th sortable="name" class="sortable">
                            <span>First Name</span>
                        </th>
                        <th sortable="lastName" class="sortable">
                            <span>Last Name</span>
                        </th>
                        <th sortable="email" class="sortable">
                            <span>Email</span>
                        </th>
                        <th sortable="inBuild" class="sortable">
                            <span>In Build</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr grid-item>
                        <td>
                            {{item.businessName}}
                        </td>
                        <td> 
                            {{item.name}}
                        </td> 
                        <td>
                            {{item.lastName}}
                        </td> 
                        <td>
                            {{item.email}}
                        </td> 
                        <td>
                            {{item.finishedSteps.length < 46 ? 'Yes' : 'No'}}
                        </td> 
                    </tr>
                </tbody>
            </table> 
        </div>   
    </section>
    <section  ng-if="report.filter.slapStatus">         
        <div class="pull-right">
            <button class="print" ng-click="printSlap()">
                <i class="fa fa-print" aria-hidden="true"></i>
                Print
            </button>
        </div>
        <div grid-data class='slap-grid' id="users-grid"
         grid-options="gridData.gridOptions" grid-actions="gridData.gridActions" ng-if="dataReady">
            <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp table table-responsive table-hover">
                <thead>
                    <tr>
                        <th sortable="businessName" class="sortable">
                            <span>Business Name</span>
                        </th>
                        <th sortable="name" class="sortable">
                            <span>First Name</span>
                        </th>
                        <th sortable="lastName" class="sortable">
                            <span>Last Name</span>
                        </th>
                        <th sortable="email" class="sortable">
                            <span>Email</span>
                        </th>
                        <th sortable="currentQuater" class="sortable">
                            <span>Current Quater</span>
                        </th>                        
                        <th sortable="annualGoal" class="sortable">
                            <span>Annual Goal</span>
                        </th>
                        <th sortable="quaterlyGoal" class="sortable">
                            <span>Quaterly Goal</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr grid-item>
                        <td>{{item.businessName}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.lastName}}</td>
                        <td>{{item.email}}</td>
                        <td>{{item.currentQuater}}</td> 
                        <td>{{item.annualGoal | number: 2}}</td>
                        <td>{{item.quaterlyGoal | number: 2}}</td>
                    </tr>
                </tbody>
            </table> 
        </div>           
    </section>
</md-card>

<md-card ng-if="(!res.users || res.users.length == 0) && is_running" flex="100" class="p-es-50 m-w-es-40 ">
    <h1>No matching slapsters </h1>
</md-card>
