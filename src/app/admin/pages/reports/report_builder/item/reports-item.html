
<div layout="column" style="width: 100%;" class="reports-item-container">
<md-card flex="100" class="p-es-30 m-w-es-40">
    <form layout="row" layout-wrap layout-align="center center" name="form">
        <md-input-container  flex="100">
            <label>Name</label>
            <input ng-model="report.name" required name="name">
            <div ng-messages="form.name.$error">
                <ng-message when="required">Name is required.</ng-message>
            </div>
        </md-input-container>



        <md-input-container flex="25">
            <label>Start Date</label>
            <md-datepicker ng-model="report.filter.startDate" md-max-date="report.filter.endDate" name="startDate"></md-datepicker>
            <div ng-messages="form.startDate.$error">
                <div ng-message="valid">The entered value is not a date!</div>
                <div ng-message="required">This date is required!</div>
                <div ng-message="mindate">Date is too early!</div>
                <div ng-message="maxdate">Date is too late!</div>
            </div>
        </md-input-container>
        <md-input-container flex="25">
            <label>End Date</label>
            <md-datepicker ng-model="report.filter.endDate" md-min-date="report.filter.startDate" name="endDate"></md-datepicker>
            <div ng-messages="form.endDate.$error">
                <div ng-message="valid">The entered value is not a date!</div>
                <div ng-message="required">This date is required!</div>
                <div ng-message="mindate">Date is too early!</div>
                <div ng-message="maxdate">Date is too late!</div>
            </div>
        </md-input-container>
        <section flex>
        </section>


        <span flex="100"  class="subtitle">Based in</span>
        <md-input-container flex="50">
            <md-select aria-label="basedIn" ng-model="report.filter.country">
                <md-option ng-repeat="country in COUNTRIES" ng-value="country.id">{{country.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Associated with SLAPexpert</span>
        <md-input-container flex="50">
            <md-select md-container-class="type-menu" aria-label="slapExpert" ng-model="report.filter.expert" multiple>
                <md-option ng-repeat="ex in expert" ng-value="ex._id">{{ex.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Associated with Partner</span>
        <md-input-container flex="50">
            <md-select md-container-class="type-menu" aria-label="slapPartner" ng-model="report.filter.partner" multiple>
                <md-option ng-repeat="pa in partner" ng-value="pa._id">{{pa.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle">SLAPstatus</span>
        <md-input-container flex="50">
            <md-select aria-label="slapStatus" ng-model="report.filter.slapStatus">
                <md-option ng-repeat="status in slapStatuses" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100" ng-if="!report.filter.slapStatus" class="subtitle">Build Status</span>
        <md-input-container ng-if="!report.filter.slapStatus" flex="50">
            <md-select  aria-label="buildStatus" ng-model="report.filter.buildStatus">
                <md-option ng-repeat="status in buildStatus" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>


        <span flex="100"  class="subtitle">Whose Status Is</span>
        <md-input-container flex="50">
            <md-select  aria-label="status" ng-model="report.filter.status">
                <md-option ng-repeat="status in STATUSES" ng-value="status.id">{{status.name}}</md-option>
            </md-select>
            <div class="md-errors-spacer"></div>
        </md-input-container>
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Associated With Plan</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="plan" ng-model="report.filter.products" multiple>
            <md-option ng-repeat="item in allProducts" ng-value="item._id">{{item.productName}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Associated With Coupon</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="coupon" ng-model="report.filter.coupons" multiple>
            <md-option ng-repeat="item in allCoupons" ng-value="item._id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Did These Activities</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="act" ng-model="report.filter.activities" multiple>
            <md-option ng-repeat="item in ActivitiesAll" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100" ng-if="report.filter.slapStatus" class="subtitle">They Are In</span>
        <md-input-container ng-if="report.filter.slapStatus" flex="100">
        <md-select  aria-label="quater" ng-model="report.filter.quaters" multiple>
            <md-option ng-repeat="item in allQuaters" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Associated With Strategy</span>
        <md-input-container flex="100">
        <md-select md-container-class="type-menu" aria-label="strategy" ng-model="report.filter.strategies" multiple>
            <md-option ng-repeat="item in allStrategies" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">User payment status</span>
        <md-input-container flex="100">
        <md-select aria-label="paymentStatus" ng-model="report.filter.paymentStatus">
            <md-option ng-repeat="item in pausingPaymentsStatus" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <span flex="100"  class="subtitle">Declined / Money Owed To Us</span>
        <md-input-container flex="100">
        <md-select aria-label="declinedStatus" ng-model="report.filter.declinedStatus">
            <md-option ng-repeat="item in declinedStatus" ng-value="item.id">{{item.name}}</md-option>
        </md-select> 
        <div class="md-errors-spacer"></div>
        </md-input-container>
        
        <section flex>
        </section>

        <section ng-if="res.users.length">
            <table class="table school-body">
                <tr>
                <th scope="col" class="grow-10">Business Name</th>
                <th scope="col" class="grow-10">First Name</th>
                <th scope="col" class="grow-10">Last Name</th>
                </tr>
                <tr class="main-tr" ng-repeat="user in res.users">
                    <td>{{user.businessName}}</td>
                    <td>{{user.name}}</td>
                    <td>{{user.lastName}}</td>
                </tr>
            </table>
        </section>

        <section layout="row" layout-align="end center" flex="100" >

            <md-button ng-click="runReportBuilder()" class="md-primary" ng-disabled="form.$invalid">
                Run
            </md-button>
            <md-button ng-click="createOrSave($event)" class="md-primary" ng-disabled="form.$invalid">
                {{reportID ? 'Save' : 'Create'}}
            </md-button>
            <md-button ng-click="deleteItem($event)" class="md-warn" ng-if="reportID">
                Delete
            </md-button>
        </section>
    </form>

</md-card>
</div>